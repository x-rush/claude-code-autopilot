---
description: 基于用户需求讨论生成需求对齐文件，确保项目方向正确
---

# /autopilot-align
与用户进行深入的需求讨论，基于讨论结果动态生成需求对齐文件，确保项目执行方向与你的期望保持一致。

## 🎯 工作流程约束

**严格遵循工作流程**：
- **从用户需求出发**：一切从你发布的原始需求任务开始
- **充分讨论决策**：详细讨论所有技术方案、实现细节和决策点
- **动态生成规划**：基于讨论结果生成项目特定的执行计划和状态跟踪文件
- **持续自主更新**：执行过程中Claude Code自主更新状态并确认需求对齐

## 📋 需求讨论流程

### 1. 理解原始需求
我将首先分析你发布的原始任务：

#### 需求解析
- **核心目标识别**：提取你想要实现的主要目标
- **功能需求梳理**：明确具体的功能性要求
- **约束条件分析**：识别技术、时间和资源约束
- **成功标准定义**：明确如何判断项目成功完成

#### 问题澄清
如果需求描述不够清晰，我将：
- 提出具体的澄清问题
- 请求补充关键信息
- 确认理解的准确性

### 2. 技术方案讨论
基于需求分析，我们将讨论具体的技术实现方案：

#### 架构设计
- **整体架构选择**：讨论最适合的架构模式
- **技术栈选择**：确定编程语言、框架和工具
- **数据结构设计**：规划数据组织和存储方式
- **接口设计**：定义模块间的交互方式

#### 实现细节
- **代码组织结构**：确定文件和目录组织方式
- **核心算法逻辑**：讨论关键算法的实现方法
- **错误处理策略**：规划异常和错误处理机制
- **性能优化考虑**：讨论性能优化策略

### 3. 质量标准设定
我们将明确项目的质量要求：

#### 代码质量
- **代码风格规范**：确定代码风格和格式标准
- **注释和文档**：规定注释编写和文档要求
- **测试策略**：确定测试类型和覆盖率要求
- **代码审查标准**：设定代码审查的检查点

#### 交付标准
- **功能完整性**：明确功能实现的程度要求
- **性能指标**：设定具体的性能目标
- **安全性要求**：讨论安全相关的标准和检查
- **可维护性**：确定代码可维护性的标准

### 4. 执行偏好确认
我将了解你的个人偏好和工作习惯：

#### 工作方式偏好
- **详细程度**：喜欢详细的实现说明还是概要指导
- **创新程度**：偏好创新性方案还是保守成熟方案
- **文档风格**：希望有完整的文档还是最小化文档

#### 风险容忍度
- **不确定性处理**：对不确定性的容忍程度
- **错误处理方式**：遇到错误时的处理偏好
- **范围变更灵活性**：对需求变更的接受程度

## 📊 动态生成需求对齐文件

基于我们的讨论，我将读取 [`templates/REQUIREMENT_ALIGNMENT.json`](templates/REQUIREMENT_ALIGNMENT.json) 结构定义文件，然后生成项目特定的需求对齐文件：

### 文件生成过程

#### 读取结构定义
```javascript
// Claude Code内部处理流程
1. 读取 templates/REQUIREMENT_ALIGNMENT.json 获取数据结构
2. 基于讨论结果填充各个字段
3. 生成项目特定的 REQUIREMENT_ALIGNMENT.json
```

#### 关键内容生成

**用户原始任务**：
- 记录你发布的原始需求描述
- 保留需求的完整性和准确性

**分析需求结构**：
- **功能性需求**：基于讨论整理具体功能需求
- **非功能性需求**：记录性能、安全等质量要求
- **技术约束**：明确技术选型和平台限制
- **业务约束**：记录时间、预算等业务限制

**用户目标结构**：
- **核心目标**：明确项目的主要目标
- **成功标准**：定义可量化的成功指标
- **目标用户**：明确最终用户群体
- **使用场景**：描述具体的使用场景

**交付物清单**：
- 基于讨论确定具体的交付物
- 明确每个交付物的要求和标准
- 设定优先级和验收条件

**预设决策**：
- 记录讨论中确定的技术选择
- 设定决策触发条件和备选方案
- 明确决策标准和选择理由

## 🔍 需求对齐验证

### 生成完整性检查
生成需求对齐文件后，我将：

#### 内容完整性验证
- 确认所有讨论要点都已记录
- 验证需求描述的准确性和完整性
- 检查决策逻辑的一致性

#### 可行性评估
- 评估技术方案的可行性
- 分析资源需求的合理性
- 识别潜在的风险和挑战

### 用户确认环节
我需要你确认：

#### 需求理解准确性
- 我是否准确理解了你的需求？
- 是否有误解或遗漏的地方？
- 需求描述是否反映了你的真实意图？

#### 技术方案合理性
- 讨论的技术方案是否符合你的期望？
- 是否有其他偏好的实现方式？
- 技术选择是否适合项目需求？

#### 质量标准适当性
- 设定的质量标准是否合适？
- 是否需要调整某些要求？
- 成功标准是否清晰可衡量？

## ⚙️ 使用方法

### 完整需求对齐
```bash
/autopilot-align
```
启动完整的需求对齐流程：
1. 分析你的原始需求
2. 进行深入的技术讨论
3. 确定质量标准和偏好
4. 生成需求对齐文件
5. 请求你的确认和批准

### 更新需求对齐
```bash
/autopilot-align --update
```
更新现有的需求对齐：
- 基于新的讨论更新需求
- 调整技术方案或质量标准
- 重新验证需求对齐

### 验证需求对齐
```bash
/autopilot-align --verify
```
验证当前需求对齐状态：
- 检查需求对齐文件的完整性
- 分析执行结果与需求的一致性
- 识别需要调整的地方

## 📝 注意事项

### 讨论充分性
- 确保所有重要决策都经过充分讨论
- 不遗留模糊不清的技术细节
- 明确记录所有选择和妥协

### 文件动态性
- 生成的需求对齐文件是项目特定的
- 基于实际讨论内容动态生成
- 不是预填充模板，而是讨论结果的记录

### 持续对齐
- 执行过程中定期验证需求对齐
- 发现偏差及时调整和确认
- 保持与用户需求的持续一致性

---

现在开始需求对齐流程。请告诉我你的具体需求任务，我将与你进行深入讨论，并基于讨论结果生成项目特定的需求对齐文件。