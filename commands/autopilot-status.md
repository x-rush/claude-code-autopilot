# /autopilot-status
查看Claude Code AutoPilot的实时执行状态和进度报告。

## 📊 当前执行状态

### 基础状态信息
- **会话ID**：从执行状态文件中读取
- **开始时间**：从执行状态文件中读取
- **当前状态**：运行中/暂停/已完成/异常中断
- **已执行时长**：实时计算执行时间

### 进度概览
- **总任务数**：从TODO_TRACKER.json读取
- **已完成任务**：统计已完成的TODO数量
- **当前任务**：显示正在执行的任务
- **完成百分比**：计算总体完成进度

## 🎯 质量指标

### 执行质量
- **代码质量评分**：从QUALITY_METRICS.json读取
- **测试覆盖率**：如果有测试，显示覆盖率
- **需求对齐度**：与原始需求的对齐程度
- **错误率统计**：统计错误发生和恢复情况

### 决策执行
- **预设决策使用率**：统计使用预设决策的比例
- **决策一致性**：验证决策与原始需求的一致性
- **自动处理成功率**：异常自动处理的成功率

## 🔧 异常状态

### 错误统计
- **总错误次数**：统计所有类型的错误
- **已解决错误**：成功恢复的错误数量
- **当前错误**：尚未解决的错误
- **严重错误**：导致任务失败的错误

### 重试情况
- **重试次数分布**：不同类型错误的重试次数
- **重试成功率**：重试后的成功恢复率
- **重试耗时统计**：重试花费的总时间

## 📈 执行时间线

### 重要事件
- **需求对齐完成**：需求讨论完成时间
- **执行计划生成**：计划生成完成时间
- **各阶段完成**：重要里程碑的完成时间
- **异常事件**：重要错误和恢复事件

### 时间预估
- **剩余时间预估**：基于当前进度预估剩余时间
- **完成时间预估**：预估最终完成时间
- **效率分析**：执行效率随时间的变化

## 📝 详细日志

### 最近操作
- **最近完成的任务**：最近5个完成的任务
- **当前任务详情**：当前正在执行任务的详细信息
- **下一步计划**：即将执行的任务预览

### 质量检查结果
- **最近质量检查**：最近的质量验证结果
- **需求对齐检查**：最近的需求对齐验证结果
- **改进建议**：基于质量检查的改进建议

## 🔍 故障诊断

### 常见问题检查
- **状态文件完整性**：检查所有状态文件是否正常
- **进度一致性**：验证各状态文件的一致性
- **权限问题**：检查文件读写权限
- **磁盘空间**：检查可用磁盘空间

### 性能监控
- **内存使用**：当前进程的内存使用情况
- **CPU使用**：当前进程的CPU使用情况
- **文件操作统计**：文件读写操作统计

## 🎯 执行建议

### 优化建议
基于当前状态提供优化建议：
- **执行效率提升**：提高执行速度的建议
- **质量改进**：提升代码质量的建议
- **风险预警**：可能出现的风险预警

### 下一步行动
提供下一步的行动建议：
- **继续执行**：如果状态正常，建议继续执行
- **问题修复**：如果发现问题，提供修复建议
- **人工干预**：如果需要人工介入，说明具体需求

## 🔧 自动化状态检查

### 集成的自动化监控
此命令现在集成了完整的自动化监控系统：

1. **状态文件自动检查**
   ```bash
   ./scripts/state-manager.sh check
   ```

2. **实时状态聚合**
   ```bash
   ./scripts/state-manager.sh status
   ```

3. **监控系统状态**
   ```bash
   ./scripts/execution-monitor.sh status
   ```

4. **执行引擎状态**
   ```bash
   ./scripts/autopilot-engine.sh status
   ```

### 智能状态分析
- **自动故障检测**: 识别状态文件损坏或不一致
- **性能监控分析**: 实时分析系统资源使用情况
- **进度趋势预测**: 基于历史数据预测完成时间
- **质量趋势分析**: 跟踪质量评分变化趋势

### 自动化修复建议
- **状态文件修复**: 自动修复损坏的JSON文件
- **进程恢复**: 重启异常停止的监控进程
- **资源优化**: 提供系统资源优化建议
- **性能调优**: 基于监控数据的性能优化建议

---

## 使用方法

执行此命令将自动调用以下组件：

1. **状态管理器检查** (`./scripts/state-manager.sh check`)
2. **监控系统状态** (`./scripts/execution-monitor.sh status`)
3. **执行引擎状态** (`./scripts/autopilot-engine.sh status`)
4. **综合状态报告生成**

### 命令功能
- ✅ **实时进度信息**: 当前执行位置和完成情况
- ✅ **质量指标**: 代码质量、测试覆盖率、需求对齐度
- ✅ **异常统计**: 错误发生和恢复情况
- ✅ **时间分析**: 执行效率和时间预估
- ✅ **故障诊断**: 系统健康状态自动检查
- ✅ **监控状态**: 7x24小时监控系统运行状态
- ✅ **优化建议**: 基于当前状态的智能改进建议

### 异常处理
如果状态文件不存在或损坏，系统将：
1. 自动检测问题类型和严重程度
2. 提供自动化修复方案
3. 尝试从备份恢复状态
4. 必要时重新初始化系统

**这是一个完全自动化的状态检查工具**，集成了所有监控和管理组件，确保你随时获得准确的执行状态信息。