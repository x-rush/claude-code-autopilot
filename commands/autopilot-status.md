---
description: 查看AutoPilot执行状态和进度报告 - 基于结构定义文件的纯插件实现
---

# /autopilot-status
查看Claude Code AutoPilot的实时执行状态和进度报告。

**纯插件实现**：基于 [`templates/`](templates/) 目录中的结构定义文件，读取和验证运行时生成的JSON状态文件，不依赖任何外部脚本或工具。

## 🎯 状态检查约束

**严格遵循结构定义**：
- **基于结构定义验证**：使用 [`templates/`](templates/) 中的结构定义文件验证运行时数据
- **纯插件读取**：Claude Code直接读取JSON状态文件，无外部依赖
- **自主数据验证**：基于结构定义验证数据完整性和一致性
- **智能状态分析**：基于状态文件内容分析执行健康度
- **执行指导提供**：基于状态分析提供具体的执行建议

## 📋 状态文件检查流程

### 1. 结构定义文件验证
```javascript
// Claude Code内部处理流程
首先验证templates/目录中的结构定义文件：
1. 读取 templates/EXECUTION_STATE.json 验证执行状态结构
2. 读取 templates/TODO_TRACKER.json 验证任务跟踪结构
3. 读取 templates/DECISION_LOG.json 验证决策记录结构
4. 读取 templates/REQUIREMENT_ALIGNMENT.json 验证需求对齐结构
5. 读取 templates/EXECUTION_PLAN.json 验证执行计划结构
```

### 2. 运行时状态文件检查
```javascript
// 检查运行时生成的JSON状态文件
验证以下文件是否存在和格式正确：
- REQUIREMENT_ALIGNMENT.json（运行时生成的需求对齐文件）
- EXECUTION_PLAN.json（运行时生成的执行计划文件）
- TODO_TRACKER.json（运行时生成的任务进度文件）
- DECISION_LOG.json（运行时生成的决策记录文件）
- EXECUTION_STATE.json（运行时生成的执行状态文件）
```

### 3. 数据完整性验证
```javascript
// 基于结构定义验证数据完整性
1. 验证每个JSON文件符合对应的结构定义
2. 检查必需字段是否存在且类型正确
3. 验证文件间的数据关联性和一致性
4. 确认时间戳和ID的逻辑正确性
```

## 📊 执行状态分析

### 1. 需求对齐状态
从 REQUIREMENT_ALIGNMENT.json 读取：
```javascript
分析需求对齐情况：
1. 用户原始任务：记录的原始需求描述
2. 功能性需求：已确认的功能需求列表和状态
3. 用户目标：核心目标和成功标准的达成情况
4. 质量标准：设定的质量标准和当前符合程度
5. 预设决策：已确认的技术决策和实施状态
```

### 2. 执行计划状态
从 EXECUTION_PLAN.json 读取：
```javascript
分析执行计划情况：
1. 会话信息：执行计划ID、生成时间、预估时长
2. 执行策略：采用的执行方法和质量门禁设置
3. 任务清单：总任务数、类型分布、复杂度分析
4. 执行阶段：当前阶段、阶段进度、里程碑状态
5. 安全边界：设定的执行约束和当前状态
```

### 3. 任务进度状态
从 TODO_TRACKER.json 读取：
```javascript
分析任务执行情况：
1. 整体进度：总任务数、已完成数、进行中数、待开始数
2. 进度百分比：基于任务数量和权重的进度计算
3. 质量指标：已完成任务的平均质量评分
4. 执行效率：实际执行时间vs预估时间的对比
5. 当前执行：正在执行的任务ID和开始时间
```

### 4. 决策记录状态
从 DECISION_LOG.json 读取：
```javascript
分析决策制定情况：
1. 决策统计：总决策数、决策类型分布、成功率
2. 偏离记录：偏离规划的决策数量和类型
3. 决策质量：决策的合理性和执行效果
4. 最新决策：最近的重要决策和原因
5. 学习改进：基于决策记录的改进建议
```

### 5. 执行状态管理
从 EXECUTION_STATE.json 读取：
```javascript
分析当前执行状态：
1. 会话元数据：会话ID、开始时间、持续时间
2. 当前位置：当前任务ID、阶段名称、进度百分比
3. 上下文管理：上下文健康度、刷新历史
4. 系统健康：整体健康评分和状态趋势
5. 下一步行动：建议的下一个操作和预估时间
```

## 🔍 健康状态评估

### 1. 文件完整性检查
```javascript
// 验证状态文件的健康状态
检查项目：
1. 文件存在性：所有状态文件都存在
2. 格式正确性：JSON格式符合结构定义
3. 数据完整性：必需字段完整且类型正确
4. 一致性检查：文件间数据逻辑一致
5. 时效性检查：时间戳合理且及时更新
```

### 2. 执行连续性检查
```javascript
// 验证执行的连续性和合理性
检查项目：
1. 会话一致性：所有文件的session_id一致
2. 进度合理性：任务进度符合逻辑顺序
3. 时间合理性：各时间戳的逻辑关系正确
4. 状态匹配：任务状态与执行状态匹配
5. 决策连贯性：决策记录的时间线连续
```

### 3. 需求对齐检查
```javascript
// 验证执行与需求的一致性
检查项目：
1. 目标符合度：执行结果符合原始目标
2. 质量标准达成：质量指标满足用户要求
3. 技术方案一致：实际执行与确认的技术方案一致
4. 偏差识别：识别与需求的偏离和问题
5. 改进建议：基于偏差提出改进措施
```

## ⚠️ 异常状态检测

### 1. 文件级异常
```javascript
// 检测文件相关问题
if (文件不存在或损坏) {
  1. 基于templates/中的结构定义重新生成文件
  2. 从其他状态文件推断和恢复数据
  3. 记录异常情况到决策日志
  4. 提供手动修复指导和建议
}
```

### 2. 数据级异常
```javascript
// 检测数据一致性问题
if (数据不一致或矛盾) {
  1. 分析数据矛盾的来源和影响
  2. 基于逻辑关系推断正确数据
  3. 更新相关文件保持数据一致性
  4. 记录数据修复过程和依据
}
```

### 3. 执行级异常
```javascript
// 检测执行过程中的问题
if (执行停滞或异常) {
  1. 分析执行停滞的原因和影响
  2. 检查任务依赖和前置条件
  3. 评估异常对整体进度的威胁
  4. 提供恢复执行的具体方案
}
```

## 📈 状态报告生成

### 1. 执行概览
```javascript
生成高层执行状态：
1. 会话基本信息：ID、开始时间、执行时长
2. 当前状态：running/paused/completed/error
3. 整体进度：完成百分比、当前任务
4. 健康评分：基于多个指标的综合评分
5. 下一步建议：基于当前状态的具体建议
```

### 2. 详细进度分析
```javascript
生成详细进度信息：
1. 任务分布：按类型、优先级、状态统计
2. 质量趋势：质量评分的时间变化趋势
3. 效率分析：执行效率和时间管理分析
4. 里程碑状态：重要里程碑的达成情况
5. 风险评估：当前执行风险和预警
```

### 3. 决策分析报告
```javascript
生成决策分析信息：
1. 决策统计：决策数量、类型、成功率
2. 偏离分析：偏离规划的情况和影响
3. 学习总结：从决策中总结的经验
4. 改进方向：基于决策记录的改进建议
```

## ⚙️ 使用方法

### 完整状态检查
```bash
/autopilot-status
```
执行完整的状态检查：
1. 验证所有状态文件的存在和格式
2. 分析执行进度和质量状态
3. 评估系统健康和需求对齐
4. 检测异常并提供修复建议
5. 生成详细的执行状态报告

### 快速状态概览
```bash
/autopilot-status --quick
```
快速查看核心状态：
1. 检查关键状态文件
2. 显示当前执行位置和进度
3. 提供基本健康状态评估
4. 给出简明的下一步建议

### 指定检查方面
```bash
/autopilot-status --aspect <检查方面>
```
指定特定方面的深度检查：
- `alignment`：需求对齐状态检查
- `progress`：任务执行进度检查
- `quality`：质量和标准符合性检查
- `health`：系统健康状态检查
- `decisions`：决策记录和分析检查

### 验证状态文件
```bash
/autopilot-status --validate
```
验证状态文件完整性：
1. 基于结构定义验证文件格式
2. 检查数据完整性和一致性
3. 验证文件间的逻辑关系
4. 提供文件修复建议

## 📝 注意事项

### 结构定义驱动
- 所有状态验证都基于templates/中的结构定义
- 确保运行时数据符合预期的数据结构
- 结构定义文件是验证的唯一标准

### 纯插件实现
- 完全由Claude Code自主执行状态检查
- 不依赖任何外部脚本或工具
- 直接读取和解析JSON状态文件

### 智能异常处理
- 自动检测和分类各种异常情况
- 提供具体的修复指导和建议
- 支持状态文件的自动恢复和重建

### 执行指导导向
- 状态检查的最终目的是指导执行
- 基于状态分析提供具体的下一步建议
- 确保执行连续性和需求对齐

---

现在开始执行状态检查。我将基于结构定义文件验证运行时状态，并生成详细的执行状态报告。